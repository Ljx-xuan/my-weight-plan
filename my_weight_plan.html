<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个性化减重计划</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: Calm Harmony -->
    <!-- Application Structure Plan: A tab-based SPA with three main sections: Dashboard, Nutrition, and Exercise. The Dashboard provides a high-level overview of stats, goals, and a weight-loss projection chart. The Nutrition section uses daily tabs to present the meal plan in a digestible format. The Exercise section uses sub-tabs for each day (Day 1-7) to organize morning and evening workouts, keeping the content structured and easy to navigate. This task-oriented design was chosen to transform the static report into a practical daily-use tool, prioritizing quick access to relevant information over the report's linear structure. -->
    <!-- Visualization & Content Choices: 
    - Report Info: Weight Loss Projection -> Goal: Show change -> Viz: Line Chart -> Interaction: Hover tooltips -> Justification: Best way to visualize progress over time. -> Library: Chart.js.
    - Report Info: Daily Meal Plan (Chinese Cuisine) -> Goal: Organize -> Viz: Tabbed Interface -> Interaction: Click to switch days -> Justification: Breaks down dense, repetitive information into manageable daily chunks. -> Library/Method: HTML/CSS/JS.
    - Report Info: Daily Exercise Schedule (Non-equipment/Treadmill/Dumbbells) -> Goal: Organize -> Viz: Tabbed Interface for days, then list for morning/evening -> Interaction: Click to switch days -> Justification: Provides a clear, actionable daily breakdown of timed exercises. -> Library/Method: HTML/CSS/JS.
    - Report Info: Key Principles/Warnings -> Goal: Inform/Alert -> Viz: Styled cards/alert boxes with icons -> Interaction: Static -> Justification: High visibility for critical information. -> Library/Method: HTML/CSS with Unicode icons.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
        }
        .tab-active {
            border-color: #0d9488; /* teal-600 */
            color: #0d9488;
            background-color: #f0fdfa; /* teal-50 */
        }
        .tab-inactive {
            border-color: transparent;
            color: #4b5563; /* gray-600 */
        }
        .section-active {
            display: block;
        }
        .section-inactive {
            display: none;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto max-w-7xl p-4 sm:p-6 lg:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-teal-700">您的个性化3个月减重计划</h1>
            <p class="mt-2 text-slate-500">为成功而设计，始终将您的健康放在首位</p>
        </header>

        <nav class="mb-8 bg-white p-2 rounded-xl shadow-sm flex justify-center space-x-2 sm:space-x-4">
            <button data-target="dashboard" class="nav-tab text-sm sm:text-base font-medium py-2 px-4 rounded-lg transition-colors duration-300">📈 仪表盘</button>
            <button data-target="nutrition" class="nav-tab text-sm sm:text-base font-medium py-2 px-4 rounded-lg transition-colors duration-300">🍎 营养计划</button>
            <button data-target="exercise" class="nav-tab text-sm sm:text-base font-medium py-2 px-4 rounded-lg transition-colors duration-300">🏃‍♂️ 运动计划</button>
        </nav>

        <main>
            <!-- Dashboard Section -->
            <section id="dashboard" class="main-section">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    
                    <!-- Left Column -->
                    <div class="lg:col-span-1 space-y-6">
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <h3 class="text-xl font-semibold text-teal-700 mb-4">关键指标</h3>
                            <ul class="space-y-3 text-slate-600">
                                <li class="flex justify-between"><span>起始体重:</span> <span class="font-bold">95 公斤 (190 斤)</span></li>
                                <li class="flex justify-between"><span>目标体重:</span> <span class="font-bold">80 公斤 (160 斤)</span></li>
                                <li class="flex justify-between"><span>身高:</span> <span class="font-bold">185 厘米</span></li>
                                <li class="flex justify-between"><span>年龄:</span> <span class="font-bold">29 岁</span></li>
                            </ul>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <h3 class="text-xl font-semibold text-teal-700 mb-4">每日代谢目标</h3>
                            <div class="space-y-4">
                                <div class="text-center bg-teal-50 p-4 rounded-lg">
                                    <p class="text-sm text-teal-800">每日目标热量摄入</p>
                                    <p class="text-3xl font-bold text-teal-600">1800-1900</p>
                                    <p class="text-sm text-teal-800">千卡</p>
                                </div>
                                <div class="flex space-x-4">
                                    <div class="w-1/2 text-center bg-sky-50 p-4 rounded-lg">
                                        <p class="text-sm text-sky-800">基础代谢率 (BMR)</p>
                                        <p class="text-2xl font-bold text-sky-600">~1966</p>
                                        <p class="text-xs text-sky-800">千卡/天</p>
                                    </div>
                                    <div class="w-1/2 text-center bg-amber-50 p-4 rounded-lg">
                                        <p class="text-sm text-amber-800">总能量消耗 (TDEE)</p>
                                        <p class="text-2xl font-bold text-amber-600">~2700</p>
                                        <p class="text-xs text-amber-800">千卡/天</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                         <div class="bg-amber-100 border-l-4 border-amber-500 text-amber-800 p-4 rounded-r-lg" role="alert">
                            <p class="font-bold">核心建议</p>
                            <p>此计划提供了一个基于推荐安全减重速度的框架。您的个人结果可能会有所不同。请始终倾听您的身体，并在需要时进行调整。</p>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
                        <h3 class="text-xl font-semibold text-teal-700 mb-1">12周预计减重轨迹</h3>
                        <p class="text-sm text-slate-500 mb-4">基于推荐的每周0.8-1公斤的安全减重速度。这是一个目标，而非保证。</p>
                        <div class="chart-container relative h-96 w-full max-w-3xl mx-auto">
                            <canvas id="weightLossChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Nutrition Section -->
            <section id="nutrition" class="main-section section-inactive">
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-2xl font-bold text-teal-700 mb-4">营养计划核心原则</h2>
                     <p class="mb-6 text-slate-600">一个成功的减重饮食不仅仅是减少卡路里，更是要选择正确的食物来为您的身体提供能量，促进饱腹感并维持肌肉。本节将指导您如何通过明智的饮食选择来实现目标。</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 text-center">
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <span class="text-3xl">🥩</span>
                            <p class="font-semibold mt-2">高蛋白质</p>
                            <p class="text-xs text-slate-500">维持肌肉，增强饱腹感</p>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <span class="text-3xl">🥦</span>
                            <p class="font-semibold mt-2">高纤维</p>
                            <p class="text-xs text-slate-500">增加饱腹，促进消化</p>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <span class="text-3xl">🌾</span>
                            <p class="font-semibold mt-2">低GI碳水</p>
                            <p class="text-xs text-slate-500">稳定血糖，持续供能</p>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <span class="text-3xl">💧</span>
                            <p class="font-semibold mt-2">充足水分</p>
                            <p class="text-xs text-slate-500">促进代谢，控制食欲</p>
                        </div>
                    </div>
                    
                    <h3 class="text-xl font-semibold text-teal-700 mb-4">7日膳食计划示例</h3>
                    <div class="border-b border-gray-200">
                        <nav class="-mb-px flex space-x-2 sm:space-x-4 overflow-x-auto" aria-label="Tabs">
                            <button data-day="day1" class="nutrition-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第一天</button>
                            <button data-day="day2" class="nutrition-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第二天</button>
                            <button data-day="day3" class="nutrition-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第三天</button>
                            <button data-day="day4" class="nutrition-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第四天</button>
                            <button data-day="day5" class="nutrition-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第五天</button>
                            <button data-day="day6" class="nutrition-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第六天</button>
                            <button data-day="day7" class="nutrition-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第七天</button>
                        </nav>
                    </div>

                    <div id="meal-plans-container" class="mt-6">
                        <!-- Meal plans will be dynamically inserted here -->
                    </div>
                </div>
            </section>

            <!-- Exercise Section -->
            <section id="exercise" class="main-section section-inactive">
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-2xl font-bold text-teal-700 mb-4">膝盖友好型运动计划</h2>
                    <p class="mb-6 text-slate-600">由于您有膝盖旧伤，本运动计划的核心是安全第一。所有推荐的活动都是低冲击性的，旨在增强力量、燃烧卡路里，同时最大程度地减少对膝关节的压力。正确的形式和倾听身体的信号是关键。本计划以非器械训练为主，器械仅限跑步机和哑铃。</p>
                    
                    <div class="bg-red-100 border-l-4 border-red-500 text-red-800 p-4 rounded-r-lg mb-8" role="alert">
                        <p class="font-bold">⚠️ 重要安全提醒</p>
                        <ul class="list-disc list-inside mt-2 text-sm">
                            <li><strong>务必咨询专业人士：</strong> 在开始此计划前，请务必咨询您的医生或物理治疗师。</li>
                            <li><strong>倾听您的身体：</strong> 区分正常的肌肉酸痛和关节疼痛。如果出现尖锐或加剧的膝盖疼痛，请立即停止。</li>
                            <li><strong>循序渐进：</strong> 从低强度和短时间开始，随着身体适应再逐渐增加。</li>
                            <li><strong>充分热身和放松：</strong> 每次运动前后都进行5-10分钟的热身和拉伸。</li>
                        </ul>
                    </div>
                    
                    <div class="border-b border-gray-200 mb-6">
                        <nav class="-mb-px flex space-x-2 sm:space-x-4 overflow-x-auto" aria-label="Exercise Tabs">
                            <button data-ex-day="day1" class="exercise-day-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第一天</button>
                            <button data-ex-day="day2" class="exercise-day-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第二天</button>
                            <button data-ex-day="day3" class="exercise-day-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第三天</button>
                            <button data-ex-day="day4" class="exercise-day-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第四天</button>
                            <button data-ex-day="day5" class="exercise-day-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第五天</button>
                            <button data-ex-day="day6" class="exercise-day-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第六天</button>
                            <button data-ex-day="day7" class="exercise-day-tab whitespace-nowrap py-3 px-3 border-b-2 font-medium text-sm">第七天</button>
                        </nav>
                    </div>
                    <div id="exercise-plan-container">
                        <!-- Daily exercise plan will be dynamically inserted here -->
                    </div>
                </div>
            </section>
        </main>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const mainSections = document.querySelectorAll('.main-section');
    const navTabs = document.querySelectorAll('.nav-tab');

    const mealData = {
        day1: {
            totalCalories: "1800-1930",
            meals: [
                { time: "早餐", name: "小米粥配鸡蛋和蔬菜", details: "一小碗小米粥, 1个煮鸡蛋, 100克水煮青菜 (如西兰花或菠菜)", calories: "380-420" },
                { time: "上午加餐", name: "香蕉", details: "1根中等大小香蕉", calories: "100-130" },
                { time: "午餐", name: "鸡胸肉炒时蔬配糙米饭", details: "150克鸡胸肉，200克混合时蔬（如西葫芦、胡萝卜、彩椒），一小碗糙米饭", calories: "450-500" },
                { time: "下午加餐", name: "圣女果", details: "1小碗圣女果", calories: "50-70" },
                { time: "晚餐", name: "清蒸鲈鱼配凉拌木耳", details: "150克清蒸鲈鱼，150克凉拌木耳（少油醋汁）", calories: "650-700" }
            ]
        },
        day2: {
            totalCalories: "1800-1940",
            meals: [
                { time: "早餐", name: "玉米面窝头配豆浆和蔬菜", details: "1个玉米面窝头, 250毫升无糖豆浆, 100克清炒时蔬", calories: "380-420" },
                { time: "上午加餐", name: "原味酸奶", details: "1杯（约150克）原味无糖酸奶", calories: "100-130" },
                { time: "午餐", name: "牛肉炖萝卜配全麦馒头", details: "150克牛肉炖萝卜（少油），1个小全麦馒头", calories: "450-500" },
                { time: "下午加餐", name: "黄瓜", details: "1根黄瓜", calories: "50-70" },
                { time: "晚餐", name: "冬瓜虾仁汤配荞麦面", details: "一碗冬瓜虾仁汤（少油），一小碗荞麦面", calories: "650-700" }
            ]
        },
        day3: {
            totalCalories: "1800-1950",
            meals: [
                { time: "早餐", name: "杂粮粥配水煮蛋和凉拌海带丝", details: "一小碗杂粮粥, 1个水煮蛋, 100克凉拌海带丝", calories: "380-420" },
                { time: "上午加餐", name: "煮玉米", details: "1根煮玉米", calories: "120-150" },
                { time: "午餐", name: "香菇滑鸡片配玉米", details: "150克鸡胸肉切片，100克香菇，1根玉米", calories: "450-500" },
                { time: "下午加餐", name: "苹果", details: "1个中等大小苹果", calories: "80-100" },
                { time: "晚餐", name: "清炒菜心配豆腐", details: "200克清炒菜心，200克豆腐（可清蒸或少油煎）", calories: "650-700" }
            ]
        },
        day4: {
            totalCalories: "1850-2020",
            meals: [
                { time: "早餐", name: "红薯粥配卤蛋和酱黄瓜", details: "一小碗红薯粥, 1个卤蛋, 50克酱黄瓜", calories: "380-420" },
                { time: "上午加餐", name: "梨", details: "1个中等大小梨", calories: "100-130" },
                { time: "午餐", name: "什锦蔬菜炒饭", details: "150克糙米饭，150克什锦蔬菜，100克瘦肉丝（如鸡肉或牛肉丝）", calories: "450-500" },
                { time: "下午加餐", name: "小番茄", details: "1小盒小番茄", calories: "50-70" },
                { time: "晚餐", name: "排骨玉米汤配荞麦面", details: "一碗排骨玉米汤（去油），一小碗荞麦面", calories: "650-700" }
            ]
        },
        day5: {
            totalCalories: "1810-1950",
            meals: [
                { time: "早餐", name: "全麦馒头配牛奶和蒸南瓜", details: "1个小全麦馒头, 250毫升低脂牛奶, 150克蒸南瓜", calories: "380-420" },
                { time: "上午加餐", name: "即食鸡胸肉", details: "100克即食鸡胸肉（便利店或超市售卖）", calories: "150-180" },
                { time: "午餐", name: "大盘鸡（减油版）配面片", details: "150克鸡肉，200克土豆/青椒（少量），一小碗面片", calories: "450-500" },
                { time: "下午加餐", name: "煮鸡蛋", details: "1个煮鸡蛋", calories: "70-90" },
                { time: "晚餐", name: "白菜豆腐煲配杂粮饭", details: "一小锅白菜豆腐煲（少油），一小碗杂粮饭", calories: "600-650" }
            ]
        },
        day6: {
            totalCalories: "1770-1910",
            meals: [
                { time: "早餐", name: "杂粮面包配花生酱和水果", details: "2片杂粮面包, 1汤匙低脂花生酱, 1个橘子", calories: "380-420" },
                { time: "上午加餐", name: "葡萄", details: "1小串葡萄", calories: "80-100" },
                { time: "午餐", name: "西红柿鸡蛋面（减油）", details: "一碗西红柿鸡蛋面（少油），加入大量蔬菜", calories: "350-400" },
                { time: "下午加餐", name: "坚果", details: "一小把混合坚果（如核桃、杏仁）", calories: "150-180" },
                { time: "晚餐", name: "清炒时蔬配水煮虾仁", details: "250克清炒时蔬，150克水煮虾仁", calories: "600-650" }
            ]
        },
        day7: {
            totalCalories: "1680-1820",
            meals: [
                { time: "早餐", name: "豆腐脑配全麦包子", details: "一碗无糖豆腐脑, 1个小全麦包子", calories: "380-420" },
                { time: "上午加餐", name: "蓝莓", details: "1小盒蓝莓", calories: "60-80" },
                { time: "午餐", name: "鸡肉沙拉（中式酱汁）", details: "150克鸡胸肉，200克混合蔬菜，少量中式低脂沙拉酱", calories: "350-400" },
                { time: "下午加餐", name: "草莓", details: "1小碗草莓", calories: "50-70" },
                { time: "晚餐", name: "菌菇汤配蒸鱼", details: "一碗菌菇汤，150克清蒸鱼", calories: "600-650" }
            ]
        }
    };
    
    const exerciseData = [
        {
            day: "第一天",
            morning: [
                { name: "热身", details: "慢走或原地踏步5分钟，活动关节。", equipment: "无" },
                { name: "跑步机快走", details: "中等强度30分钟，心率保持在舒适范围，注意膝盖感受。", equipment: "跑步机" },
                { name: "拉伸", details: "下半身柔韧性拉伸5-10分钟（股四头肌、腘绳肌、小腿）。", equipment: "无" }
            ],
            evening: [
                { name: "核心力量训练", details: "平板支撑30-60秒x3组，自行车卷腹15-20次x3组。", equipment: "无" },
                { name: "上半身力量训练", details: "坐姿哑铃推举10-12次x3组，俯卧撑（可跪姿）8-12次x3组。", equipment: "哑铃" }
            ]
        },
        {
            day: "第二天",
            morning: [
                { name: "快走", details: "户外快走40-45分钟，选择较软地面，如公园小径或草地。", equipment: "无" },
                { name: "柔韧性拉伸", details: "全身拉伸10分钟。", equipment: "无" }
            ],
            evening: [
                { name: "下半身力量训练", details: "臀桥10-15次x3组，侧向弹力带行走（无弹力带模拟）每侧10-15步x3组。", equipment: "无" },
                { name: "休息与恢复", details: "轻度拉伸或泡沫轴放松15分钟。", equipment: "无" }
            ]
        },
        {
            day: "第三天",
            morning: [
                { name: "热身", details: "慢走或原地踏步5分钟，活动关节。", equipment: "无" },
                { name: "跑步机快走/慢跑", details: "中等强度30-40分钟，心率保持在舒适范围，注意膝盖感受。如果膝盖不适，请切换为快走。", equipment: "跑步机" },
                { name: "拉伸", details: "下半身柔韧性拉伸5-10分钟。", equipment: "无" }
            ],
            evening: [
                { name: "核心力量训练", details: "坐姿俄罗斯转体每侧15-20次x3组，直腿抬高每腿10-15次x3组。", equipment: "无" },
                { name: "上半身力量训练", details: "坐姿哑铃二头肌弯举10-12次x3组，哑铃三头肌伸展10-12次x3组。", equipment: "哑铃" }
            ]
        },
        {
            day: "第四天",
            morning: [
                { name: "户外快走", details: "30-45分钟，尝试提高步频。", equipment: "无" },
                { name: "柔韧性拉伸", details: "全身拉伸10分钟。", equipment: "无" }
            ],
            evening: [
                { name: "主动恢复", details: "慢走20分钟或轻柔伸展。", equipment: "无" }
            ]
        },
        {
            day: "第五天",
            morning: [
                { name: "热身", details: "慢走或原地踏步5分钟，活动关节。", equipment: "无" },
                { name: "跑步机快走", details: "中等强度30分钟。", equipment: "跑步机" },
                { name: "拉伸", details: "下半身柔韧性拉伸5-10分钟。", equipment: "无" }
            ],
            evening: [
                { name: "下半身力量训练", details: "蚌式开合每侧15-20次x3组，腘绳肌弯举（无器械模拟，如俯卧屈膝）12-15次x3组。", equipment: "无" },
                { name: "核心力量训练", details: "平板支撑30-60秒x3组。", equipment: "无" }
            ]
        },
        {
            day: "第六天",
            morning: [
                { name: "户外快走", details: "45分钟，选择风景优美的路径，享受运动。", equipment: "无" },
                { name: "柔韧性拉伸", details: "全身拉伸10分钟。", equipment: "无" }
            ],
            evening: [
                { name: "自由活动", details: "可以进行额外的低强度有氧或彻底休息。", equipment: "无" }
            ]
        },
        {
            day: "第七天",
            morning: [
                { name: "主动恢复", details: "轻度步行或伸展20-30分钟。", equipment: "无" }
            ],
            evening: [
                { name: "彻底休息", details: "让身体充分恢复，为下一周做准备。", equipment: "无" }
            ]
        }
    ];


    const nutritionTabs = document.querySelectorAll('.nutrition-tab');
    const mealPlansContainer = document.getElementById('meal-plans-container');

    function displayMealPlan(day) {
        const data = mealData[day];
        if (!data) return;

        let mealHTML = `<div class="p-1"><p class="text-right text-sm font-semibold text-slate-600 mb-4">当日总热量约: ${data.totalCalories} 千卡</p><div class="space-y-4">`;
        data.meals.forEach(meal => {
            mealHTML += `
                <div class="flex items-start space-x-4 p-4 rounded-lg bg-slate-50">
                    <div class="bg-teal-100 text-teal-700 font-bold text-sm rounded-md px-3 py-1">${meal.time}</div>
                    <div class="flex-1">
                        <p class="font-semibold text-slate-800">${meal.name}</p>
                        <p class="text-sm text-slate-500">${meal.details}</p>
                    </div>
                    <div class="text-right">
                        <p class="font-medium text-slate-700">${meal.calories}</p>
                        <p class="text-xs text-slate-400">千卡</p>
                    </div>
                </div>
            `;
        });
        mealHTML += `</div></div>`;
        mealPlansContainer.innerHTML = mealHTML;
    }

    function setActiveNutritionTab(day) {
        nutritionTabs.forEach(t => {
            if (t.dataset.day === day) {
                t.classList.add('tab-active');
                t.classList.remove('tab-inactive');
            } else {
                t.classList.add('tab-inactive');
                t.classList.remove('tab-active');
            }
        });
        displayMealPlan(day);
    }
    
    nutritionTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            setActiveNutritionTab(tab.dataset.day);
        });
    });

    const exerciseDayTabs = document.querySelectorAll('.exercise-day-tab');
    const exercisePlanContainer = document.getElementById('exercise-plan-container');

    function displayExercisePlan(dayIndex) {
        const data = exerciseData[dayIndex];
        if (!data) return;

        let planHTML = `<div class="space-y-6">`;

        // Morning workout
        if (data.morning && data.morning.length > 0) {
            planHTML += `
                <div class="bg-teal-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-teal-700 mb-3">☀️ 早上运动</h4>
                    <ul class="space-y-2 text-slate-600">
                        ${data.morning.map(ex => `
                            <li>
                                <strong class="text-slate-800">${ex.name}</strong>: ${ex.details}
                                ${ex.equipment && ex.equipment !== '无' ? `<span class="ml-2 text-xs text-slate-500">(器械: ${ex.equipment})</span>` : ''}
                            </li>
                        `).join('')}
                    </ul>
                </div>
            `;
        }

        // Evening workout
        if (data.evening && data.evening.length > 0) {
            planHTML += `
                <div class="bg-sky-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-sky-700 mb-3">🌙 晚上运动</h4>
                    <ul class="space-y-2 text-slate-600">
                        ${data.evening.map(ex => `
                            <li>
                                <strong class="text-slate-800">${ex.name}</strong>: ${ex.details}
                                ${ex.equipment && ex.equipment !== '无' ? `<span class="ml-2 text-xs text-slate-500">(器械: ${ex.equipment})</span>` : ''}
                            </li>
                        `).join('')}
                    </ul>
                </div>
            `;
        }
        
        planHTML += `</div>`;
        exercisePlanContainer.innerHTML = planHTML;
    }

    function setActiveExerciseDayTab(dayId) {
        exerciseDayTabs.forEach(t => {
            if (t.dataset.exDay === dayId) {
                t.classList.add('tab-active');
                t.classList.remove('tab-inactive');
            } else {
                t.classList.add('tab-inactive');
                t.classList.remove('tab-active');
            }
        });
        const dayIndex = parseInt(dayId.replace('day', '')) - 1; // Convert 'day1' to 0, 'day2' to 1, etc.
        displayExercisePlan(dayIndex);
    }

    exerciseDayTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            setActiveExerciseDayTab(tab.dataset.exDay);
        });
    });


    function setActiveNavTab(targetId) {
        mainSections.forEach(section => {
            section.classList.toggle('section-active', section.id === targetId);
            section.classList.toggle('section-inactive', section.id !== targetId);
        });
        navTabs.forEach(tab => {
            tab.classList.toggle('tab-active', tab.dataset.target === targetId);
            tab.classList.toggle('tab-inactive', tab.dataset.target !== targetId);
        });
    }
    
    navTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            setActiveNavTab(tab.dataset.target);
        });
    });

    function createWeightChart() {
        const ctx = document.getElementById('weightLossChart').getContext('2d');
        const startWeight = 95;
        const weeklyLoss = 0.9; // Average of 0.8-1.0 kg
        const labels = Array.from({length: 13}, (_, i) => `第 ${i} 周`);
        const data = Array.from({length: 13}, (_, i) => (startWeight - (i * weeklyLoss)).toFixed(1));

        new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: '预计体重 (公斤)',
                    data: data,
                    borderColor: '#0d9488', // teal-600
                    backgroundColor: 'rgba(13, 148, 136, 0.1)',
                    fill: true,
                    tension: 0.3,
                    pointBackgroundColor: '#0d9488',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#0d9488'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: false,
                        title: {
                            display: true,
                            text: '体重 (公斤)'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: '时间'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.y !== null) {
                                    label += context.parsed.y + ' 公斤';
                                }
                                return label;
                            }
                        }
                    }
                }
            }
        });
    }
    
    // Initial setup
    createWeightChart();
    setActiveNavTab('dashboard');
    setActiveNutritionTab('day1');
    setActiveExerciseDayTab('day1'); // Set default active day for exercise
});
</script>

</body>
</html>